---
title: 树莓派折腾记录
date: 2024-10-08 22:22:00
updated: 2024-10-08 22:22:00
categories: 
- 学习
tags: 
- 硬件
- 树莓派
keywords:
- 硬件
- 树莓派
description: 装个小雅影音库，美滋滋！
cover: https://cdn.jsdelivr.net/gh/01Petard/imageURL@main/img/202410212137950.png
top_img: https://cdn.jsdelivr.net/gh/01Petard/imageURL@main/img/202410212138771.png
---

# 正确显示中文

```shell
sudo apt install ttf-wqy-zenhei
```

```shell
sudo raspi-config
```

把光标移到Localisation Options上

翻到最下面的选项，勾上zh_CN,UTF-8

然后选择默认语言，选择zh_CN

设置完成之后，reboot重启就可以看到熟悉的中文了

# 设置静态无线IP（有点小问题，用到再说）

> **如果用有线就不用那么麻烦了。**

确认是否安装了 dhcpcd：

```shell
sudo apt list --installed | grep dhcpcd
```

如果没有安装，可以使用以下命令安装它：

```shell
sudo apt install dhcpcd5
```

启用 dhcpcd 服务：

```shell
sudo systemctl enable dhcpcd
sudo systemctl start dhcpcd
```

检查是否使用了 NetworkManager：

```shell
sudo systemctl status NetworkManager
```

如果 `NetworkManager` 正在运行，可能它覆盖了 `dhcpcd` 的设置。你可以通过 `nmcli` 来设置静态IP，例如：

```shell
nmcli con show
```

找到 `wlan0` 的连接名称，然后设置静态IP（假设连接名称是 `MyWifiConnection`）：

```shell
sudo nmcli con mod preconfigured ipv4.addresses 192.168.124.21/24
sudo nmcli con mod preconfigured ipv4.gateway 192.168.124.1
sudo nmcli con mod preconfigured ipv4.method manual
sudo nmcli con up preconfigured
```

通过`ifconfig`查看网卡：

<img src="https://cdn.jsdelivr.net/gh/01Petard/imageURL@main/img/202410081435885.png" alt="image-20241008143532831" style="zoom:80%;" />

编辑文件：

```shell
sudo vi /etc/dhcpcd.conf
```

添加配置项：

```shell
#无线
interface wlan0
inform 192.168.124.22
static routers=192.168.124.1

interface wlan0
static ip_address=192.168.124.22/24
static routers=192.168.124.1
static domain_name_servers=8.8.8.8 8.8.4.4
```

```shell
#有线
interface eth0
inform 192.168.124.22
static routers=192.168.124.1
```

退出保存然后重启树莓派：

```shell
sudo reboot
```

# 启动脚本

```shell
chmod +x pi.sh
```

```shell
./pi.sh proxy
```

# 安装1Panel

<img src="https://cdn.jsdelivr.net/gh/01Petard/imageURL@main/img/202410081827380.png" alt="image-20241008182757340" style="zoom:80%;" />

# 安装Alist、小雅、小雅清理工具

<img src="https://cdn.jsdelivr.net/gh/01Petard/imageURL@main/img/202410081835085.png" alt="image-20241008183525056" style="zoom:80%;" />

根据如下三个网址的提示完成token的填写
阿里云盘Token（32位）：https://alist.nn.ci/zh/guide/drivers/aliyundrive.html

阿里云盘OpenToken(335位）：https://alist.nn.ci/tool/aliyundrive/request.html

阿里云盘转存目录folderid：https://www.aliyundrive.com/s/rP9gP3h9asE

<img src="https://cdn.jsdelivr.net/gh/01Petard/imageURL@main/img/202410081845667.png" alt="image-20241008184537599" style="zoom:67%;" />

# 安装内网穿透

<img src="https://cdn.jsdelivr.net/gh/01Petard/imageURL@main/img/202410081930798.png" style="zoom:80%;" />

成功，但有效期只有24小时，够用了

<img src="https://cdn.jsdelivr.net/gh/01Petard/imageURL@main/img/202410081939485.png" style="zoom:50%;" />